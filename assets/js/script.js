jQuery(function(a){function b(a){n?(a.removeClass("active"),j.removeClass("menu-active"),setTimeout(function(){a.removeClass("initial"),j.removeClass("menu-initial")},300),n=!1):(j.addClass("menu-initial"),a.addClass("initial"),setTimeout(function(){j.addClass("menu-active"),a.addClass("active")},1),n=!0)}function c(){a(".menu-list-item a").each(function(){var b=a(this);b.removeClass("current"),b.attr("href")==window.location.href&&b.addClass("current")})}function d(){a(".post-list .post .post-image img").each(function(){var b=a(this);b.load(function(){b.parents(".post-image").css({height:"0","padding-bottom":100/b.width()*b.height()+"%"})})});var b=a(".post-list").masonry({itemSelector:".post",isAnimated:!1,isRTL:!0,isOriginLeft:!1,gutter:0,columnWidth:1,transitionDuration:0}).imagesLoaded().always(function(){b.masonry("layout")})}function e(){a("pre code").each(function(b,c){hljs.highlightBlock(c);var d=a(this),e=d.html().split(/\n/).length,f=[];for(b=1;b<e;b++)f+='<span class="line">'+b+"</span>";d.parent().addClass("codeblock").append('<div class="lines">'+f+"</div>")})}function f(){a("#wrapper").fitVids()}function g(){if("undefined"!=typeof disqus&&document.getElementById("disqus_thread")){if(window.DISQUS)return DISQUS.reset({reload:!0,config:function(){this.page.identifier=location.pathname,this.page.url=location.origin+location.pathname}});a.ajax({type:"GET",url:"//"+disqus+".disqus.com/embed.js",dataType:"script",cache:!0})}else a(".post-comments").css({display:"none"})}function h(){d(),i(),e(),f(),g(),c(),m(".moment-date"),l(".digit2p")}function i(){a('a[href^="'+window.location.origin+'"], .post-image a, .post-title a, .post-more a, .post-meta a, .post-tags a, #pagination a').each(function(){var b=a(this);b.hasClass("rss")||(b.addClass("js-ajax-link"),b.attr("href").indexOf("page")>-1&&b.addClass("js-archive-index"),b.attr("href")==window.location.origin&&b.addClass("js-show-index"),b.attr("href").indexOf("tag")>-1&&b.addClass("js-tag-index"),b.attr("href").indexOf("author")>-1&&b.addClass("js-author-index"))})}var j=a("html"),k=a("body");pdigit=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"];var l=function(b){a(b).each(function(b,c){var d=a(c),e=d.text();e=e.replace(/[0-9]/gm,function(a){return pdigit[a]}),d.html(e)})},m=function(b){var c=a(b);if(c.attr("data-date")){var d=moment(new Date(c.attr("data-date"))),e=d.format("jYYYY/jM/jD").toString().replace(/[0-9]/gm,function(a){return pdigit[a]});c.html(e)}};m(".moment-date"),l(".digit2p"),k.on("click",'[data-action="menu"]',function(){var c=(a(this).data("action"),a('[data-target="'+a(this).data("target")+'"]').not("[data-action]"));b(c)});var n=!1;k.on("click",".overlay, #menu a",function(){if(j.hasClass("menu-active")){var c=a('[data-target="menu"]').not("[data-action]");b(c)}}),c(),d(),e(),f(),g(),i();var o=window.History,p=!1,q=a("#ajax-container");return!!o.enabled&&(o.Adapter.bind(window,"statechange",function(){j.addClass("loading");var b=o.getState();a.get(b.url,function(b){var c=a(b),d=a("#ajax-container",c).contents(),e=b.match(/<title>(.*?)<\/title>/)[1];q.fadeOut(500,function(){j.hasClass("push-next")&&(j.removeClass("push-next"),j.addClass("pushed-next")),j.hasClass("push-prev")&&(j.removeClass("push-prev"),j.addClass("pushed-prev")),document.title=a("<textarea/>").html(e).text(),q.html(d),k.removeClass(),k.addClass(a("#body-class").attr("class")),NProgress.done(),q.fadeIn(500),a(document).scrollTop(0),setTimeout(function(){j.removeClass("loading")},50),h(),p=!1})})}),a("body").on("click",".js-ajax-link",function(b){b.preventDefault();var c=a(this);if(c.hasClass("post-nav-item")||c.hasClass("pagination-item")?((c.hasClass("post-nav-next")||c.hasClass("pagination-next"))&&(j.removeClass("pushed-prev"),j.addClass("push-next")),(c.hasClass("post-nav-prev")||c.hasClass("pagination-prev"))&&(j.removeClass("pushed-next"),j.addClass("push-prev"))):(j.removeClass("pushed-next"),j.removeClass("pushed-prev")),p===!1){var d=o.getState(),e=a(this).prop("href"),f=a(this).attr("title")||null;e.replace(/\/$/,"")!==d.url.replace(/\/$/,"")&&(p=!0,j.addClass("loading"),NProgress.start(),o.pushState({},f,e))}}),void a("body").on("click","#post-index .post .js-ajax-link",function(){var b=a(this).parents(".post");b.addClass("initial"),setTimeout(function(){b.addClass("active")},1)}))});